import{_ as A,c as R,h as S}from"./_plugin-vue_export-helper-hPnFxj0Z.js";import{o as s,b as l,d as i,f as a,F as m,e as g,g as h,v as d,j as k,w as v,t as b,n as x}from"./vue.esm-bundler-Bv3a8yGg.js";const X={emits:["change","blur","update:value","ok","cancel"],mixins:[R],props:{class:{type:String,default:""},output:{type:String,default:"hex"},cancelText:{type:String,default:"Cancel"},okText:{type:String,default:"Apply"}},data(){return{selector:"hex",listSelector:["hex","rgb","hsb"],clientX:0,clientY:0,clientXGradient:0,clientXAlpha:0}},mounted(){this.handleRecalcPickerPosition()},computed:{topSelect(){return`${this.clientY}px`},leftSelect(){return`${this.clientX}px`},backgroundGradient(){const[t,e,r]=S(this.hsb.hue,100,100);return`rgb(${t},${e},${r})`},backgroundPicker(){return`rgb(${this.rgb.red},${this.rgb.green},${this.rgb.blue})`},backgroundBlock(){return`rgba(${this.rgb.red},${this.rgb.green},${this.rgb.blue}, ${this.alpha/100})`},inputRgbOptions(){return Object.entries(this.rgb).map(([t,e])=>({key:t,value:`${t}Mark`}))},inputHsbOptions(){return Object.entries(this.hsb).map(([t,e])=>({key:t,value:`${t}Mark`}))}},methods:{handleRecalcPickerPosition(){const t=this.$refs.pickerGradient.getBoundingClientRect(),e=this.$refs.pickerSelect.getBoundingClientRect();this.clientXGradient=t.width*(this.hsb.hue/360)-6,this.clientX=e.width*(this.hsb.saturation/100)-8,this.clientY=e.height*((100-this.hsb.brightness)/100)-8},updateSaturationAndBrightness(){const t=this.$refs.pickerSaturation.getBoundingClientRect(),e=this.$refs.pickerCursor.getBoundingClientRect(),r=Math.round((this.clientX+e.width/2)/t.width*100),f=100-Math.round((this.clientY+e.height/2)/t.height*100);this.hsb.saturation=r,this.hsb.brightness=f,this.handleColorChangePosition("hsb")},updateHue(){const t=this.$refs.pickerGradient.getBoundingClientRect(),e=Math.round((this.clientXGradient+6)/t.width*360);this.hsb.hue=e,this.handleColorChangePosition("hsb")},updateAlpha(){const t=this.$refs.pickerAlpha.getBoundingClientRect(),e=Math.round((this.clientXAlpha+6)/t.width*100),r=Math.round(e/100*255).toString(16).padStart(2,"0");this.alpha=e,this.hex=`#${this.hex.replace("#","").slice(0,6)}${r}`},handleColorChangePosition(t=this.selector){this.handleColorChange(t),this.handleRecalcPickerPosition(),this.handleExport()},onMouseDown(t){t.preventDefault();const e=this.$refs.pickerSelect.getBoundingClientRect();this.clientX=t.clientX-e.left-8,this.clientY=t.clientY-e.top-8,this.updateSaturationAndBrightness(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseMove(t){const e=this.$refs.pickerSelect.getBoundingClientRect();e.top<t.clientY&&t.clientY<e.bottom&&(this.clientY=t.clientY-e.top-8),e.left<t.clientX&&t.clientX<e.right&&(this.clientX=t.clientX-e.left-8),t.clientX>e.right&&(this.clientX=e.width-8),t.clientX<e.left&&(this.clientX=-8),t.clientY>e.bottom&&(this.clientY=e.height-8),t.clientY<e.top&&(this.clientY=-8),this.updateSaturationAndBrightness()},onMouseUp(t){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},onMouseDownGradient(t){t.preventDefault();const e=this.$refs.pickerGradient.getBoundingClientRect();this.clientXGradient=t.clientX-e.left-8,this.updateHue(),document.addEventListener("mousemove",this.onMouseMoveGradient),document.addEventListener("mouseup",this.onMouseUpGradient)},onMouseMoveGradient(t){const e=this.$refs.pickerGradient.getBoundingClientRect();e.left<t.clientX&&t.clientX<e.right&&(this.clientXGradient=t.clientX-e.left-6),t.clientX>e.right&&(this.clientXGradient=e.width-6),t.clientX<e.left&&(this.clientXGradient=-6),this.updateHue()},onMouseUpGradient(t){document.removeEventListener("mousemove",this.onMouseMoveGradient),document.removeEventListener("mouseup",this.onMouseUpGradient)},onMouseDownAlpha(t){t.preventDefault();const e=this.$refs.pickerAlpha.getBoundingClientRect();this.clientXAlpha=t.clientX-e.left-8,this.updateAlpha(),document.addEventListener("mousemove",this.onMouseMoveAlpha),document.addEventListener("mouseup",this.onMouseUpAlpha)},onMouseMoveAlpha(t){const e=this.$refs.pickerAlpha.getBoundingClientRect();e.left<t.clientX&&t.clientX<e.right&&(this.clientXAlpha=t.clientX-e.left-6),t.clientX>e.right&&(this.clientXAlpha=e.width-6),t.clientX<e.left&&(this.clientXAlpha=-6),this.updateAlpha()},onMouseUpAlpha(t){document.removeEventListener("mousemove",this.onMouseMoveAlpha),document.removeEventListener("mouseup",this.onMouseUpAlpha)},handleCancel(){this.$emit("cancel")},handleOk(){this.$emit("ok")}},beforeUnmount(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMoveGradient),document.removeEventListener("mouseup",this.onMouseUpGradient),document.removeEventListener("mousemove",this.onMouseMoveAlpha),document.removeEventListener("mouseup",this.onMouseUpAlpha)},watch:{value(){this.handleRecalcColor(this.value),this.handleRecalcPickerPosition()}}},w={class:"color-picker-select"},G={class:"color-picker-slider-container"},B={class:"color-picker-slider-group"},E={class:"color-picker-slider-hue"},P=i("div",{class:"color-picker-gradient"},null,-1),L={class:"color-picker-slider-alpha"},U={class:"color-picker-color-block"},_={class:"color-picker-input-container"},T={class:"color-picker-selector"},D=["onMousedown"],V={class:"color-picker-input"},Y={class:"color-picker-input-type"},O={key:0,class:"color-picker-input-hex"},$={key:1,class:"color-picker-input-rgb"},I=["name","onUpdate:modelValue"],z={key:2,class:"color-picker-input-hsb"},H=["max","name","onUpdate:modelValue"],F={class:"color-picker-input-alpha"},N={class:"color-picker-buttons"};function j(t,e,r,f,c,o){return s(),l("div",{class:x(["color-picker-panel",r.class])},[i("div",w,[i("div",{class:"color-picker-palette",onMousedown:e[0]||(e[0]=(...n)=>o.onMouseDown&&o.onMouseDown(...n)),ref:"pickerSelect"},[i("div",{style:a({position:"absolute",left:o.leftSelect,top:o.topSelect,zIndex:1}),ref:"pickerCursor"},[i("div",{class:"color-picker-handler",style:a({background:o.backgroundPicker})},null,4)],4),i("div",{class:"color-picker-saturation",ref:"pickerSaturation",style:a({"background-color":o.backgroundGradient,"background-image":"linear-gradient(0deg, rgb(0, 0, 0), transparent), linear-gradient(90deg, rgb(255, 255, 255), rgba(255, 255, 255, 0))"})},null,4)],544)]),i("div",G,[i("div",B,[i("div",E,[i("div",{class:"color-picker-palette",onMousedown:e[1]||(e[1]=(...n)=>o.onMouseDownGradient&&o.onMouseDownGradient(...n)),ref:"pickerGradient"},[i("div",{style:a({position:"absolute",left:`${this.clientXGradient}px`,top:"-2px",zIndex:1})},[i("div",{class:"color-picker-handler",style:a({backgroundColor:o.backgroundGradient})},null,4)],4),P],544)]),i("div",L,[i("div",{class:"color-picker-palette",onMousedown:e[2]||(e[2]=(...n)=>o.onMouseDownAlpha&&o.onMouseDownAlpha(...n))},[i("div",{style:a({position:"absolute",left:`${this.clientXAlpha}px`,top:"-2px",zIndex:1})},[i("div",{class:"color-picker-handler",style:a({background:o.backgroundBlock})},null,4)],4),i("div",{class:"color-picker-opacity",ref:"pickerAlpha",style:a({background:`linear-gradient(to right, rgba(255, 0, 4, 0), ${o.backgroundPicker}`})},null,4)],32)])]),i("div",U,[i("div",{class:"color-picker-color-block-inner",style:a({background:o.backgroundBlock})},null,4)])]),i("div",_,[i("div",T,[(s(!0),l(m,null,g(c.listSelector,n=>(s(),l("div",{key:n,class:x(["color-picker-selector-item",{"color-picker-selector-item--active":c.selector===n}]),onMousedown:v(u=>c.selector=n,["prevent"])},b(n),43,D))),128))]),i("div",V,[i("div",Y,[c.selector==="hex"?(s(),l("div",O,[h(i("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>t.hexMark=n),name:"hex",maxlength:"9",onInput:e[4]||(e[4]=n=>o.handleColorChangePosition()),onBlur:e[5]||(e[5]=(...n)=>t.restoreSelection&&t.restoreSelection(...n)),onFocus:e[6]||(e[6]=(...n)=>t.savedSelection&&t.savedSelection(...n))},null,544),[[d,t.hexMark]])])):k("",!0),c.selector==="rgb"?(s(),l("div",$,[(s(!0),l(m,null,g(o.inputRgbOptions,n=>h((s(),l("input",{type:"number",min:"0",max:"255",maxlength:"3",key:n.key,name:n.key,"onUpdate:modelValue":u=>this[n.value]=u,onInput:e[7]||(e[7]=u=>o.handleColorChangePosition())},null,40,I)),[[d,this[n.value]]])),128))])):k("",!0),c.selector==="hsb"?(s(),l("div",z,[(s(!0),l(m,null,g(o.inputHsbOptions,n=>h((s(),l("input",{type:"number",min:"0",max:n.key=="hue"?360:100,maxlength:"3",key:n.key,name:n.key,"onUpdate:modelValue":u=>this[n.value]=u,onInput:e[8]||(e[8]=u=>o.handleColorChangePosition())},null,40,H)),[[d,this[n.value]]])),128))])):k("",!0)]),i("div",F,[h(i("input",{type:"number",name:"alpha",min:"0",max:"100",maxlength:"3","onUpdate:modelValue":e[9]||(e[9]=n=>t.alphaMark=n)},null,512),[[d,t.alphaMark]])])])]),i("div",N,[i("button",{class:"color-picker-cancel",onClick:e[10]||(e[10]=v((...n)=>o.handleCancel&&o.handleCancel(...n),["stop","prevent"]))},b(r.cancelText),1),i("button",{class:"color-picker-apply",onClick:e[11]||(e[11]=v((...n)=>o.handleOk&&o.handleOk(...n),["stop","prevent"]))},b(r.okText),1)])],2)}const q=A(X,[["render",j]]);X.__docgenInfo={exportName:"default",displayName:"ColorPicker",description:"",tags:{},props:[{name:"class",mixin:{name:"-",path:"../../mixins/colorMixin.ts"},type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"output",mixin:{name:"-",path:"../../mixins/colorMixin.ts"},type:{name:"string"},defaultValue:{func:!1,value:'"hex"'}},{name:"cancelText",mixin:{name:"-",path:"../../mixins/colorMixin.ts"},type:{name:"string"},defaultValue:{func:!1,value:'"Cancel"'}},{name:"okText",mixin:{name:"-",path:"../../mixins/colorMixin.ts"},type:{name:"string"},defaultValue:{func:!1,value:'"Apply"'}}],events:[{name:"change",mixin:{name:"-",path:"../../mixins/colorMixin.ts"}},{name:"blur",mixin:{name:"-",path:"../../mixins/colorMixin.ts"}},{name:"update:value",mixin:{name:"-",path:"../../mixins/colorMixin.ts"}},{name:"ok",mixin:{name:"-",path:"../../mixins/colorMixin.ts"}},{name:"cancel",mixin:{name:"-",path:"../../mixins/colorMixin.ts"}}],sourceFiles:["/home/runner/work/v3-colorpicker-vn/v3-colorpicker-vn/src/components/colorpicker/ColorPicker.vue"]};const Q={title:"Example/VuColorPicker",component:q,tags:["autodocs"],argTypes:{value:{control:"color"},output:{control:"select",options:["hex","rgb","rgba","hsb"]}},args:{value:"#000000",class:"",output:"hex",cancelText:"Cancel",okText:"Apply"}},p={args:{value:"#000000",output:"hex",cancelText:"Cancel",okText:"Apply",class:"Test"}};var M,C,y;p.parameters={...p.parameters,docs:{...(M=p.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    value: "#000000",
    output: "hex",
    cancelText: "Cancel",
    okText: "Apply",
    class: "Test"
  }
}`,...(y=(C=p.parameters)==null?void 0:C.docs)==null?void 0:y.source}}};const W=["Demo"];export{p as Demo,W as __namedExportsOrder,Q as default};
